var ln=Object.defineProperty,fn=Object.defineProperties;var dn=Object.getOwnPropertyDescriptors;var ft=Object.getOwnPropertySymbols;var pn=Object.prototype.hasOwnProperty,gn=Object.prototype.propertyIsEnumerable;var dt=(e,t,n)=>t in e?ln(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Se=(e,t)=>{for(var n in t||(t={}))pn.call(t,n)&&dt(e,n,t[n]);if(ft)for(var n of ft(t))gn.call(t,n)&&dt(e,n,t[n]);return e},pt=(e,t)=>fn(e,dn(t));function gt(e,t,n,r,i){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:i;return e===i?n:e}var je="undefined",mt="object",Rt="any",qt="*",ae="__",Re=typeof process!="undefined"?process:{};Re.env&&Re.env.NODE_ENV;var F=typeof window!="undefined";Re.versions!=null&&Re.versions.node!=null;typeof Deno!="undefined"&&Deno.core;F&&window.name==="nodejs"||typeof navigator!="undefined"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"));function Vt(e,t){return t.charAt(0)[e]()+t.slice(1)}var mn=Vt.bind(null,"toUpperCase"),vn=Vt.bind(null,"toLowerCase");function yn(e){return Bt(e)?mn("null"):typeof e=="object"?Sn(e):Object.prototype.toString.call(e).slice(8,-1)}function qe(e,t){t===void 0&&(t=!0);var n=yn(e);return t?vn(n):n}function ke(e,t){return typeof t===e}var Y=ke.bind(null,"function"),de=ke.bind(null,"string"),le=ke.bind(null,"undefined"),hn=ke.bind(null,"boolean");ke.bind(null,"symbol");function Bt(e){return e===null}function bn(e){return qe(e)==="number"&&!isNaN(e)}function wn(e){return qe(e)==="array"}function W(e){if(!In(e))return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function In(e){return e&&(typeof e=="object"||e!==null)}function Sn(e){return Y(e.constructor)?e.constructor.name:null}function En(e){return e instanceof Error||de(e.message)&&e.constructor&&bn(e.constructor.stackTraceLimit)}function Jt(e,t){if(typeof t!="object"||Bt(t))return!1;if(t instanceof e)return!0;var n=qe(new e(""));if(En(t))for(;t;){if(qe(t)===n)return!0;t=Object.getPrototypeOf(t)}return!1}Jt.bind(null,TypeError);Jt.bind(null,SyntaxError);function Be(e,t){var n=e instanceof Element||e instanceof HTMLDocument;return n&&t?On(e,t):n}function On(e,t){return t===void 0&&(t=""),e&&e.nodeName===t.toUpperCase()}function Je(e){var t=[].slice.call(arguments,1);return function(){return e.apply(void 0,[].slice.call(arguments).concat(t))}}Je(Be,"form");Je(Be,"button");Je(Be,"input");Je(Be,"select");function vt(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return null}}function Pn(){if(F){var e=navigator,t=e.languages;return e.userLanguage||(t&&t.length?t[0]:e.language)}}function _n(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}}function xn(e){return function(t){for(var n,r=Object.create(null),i=/([^&=]+)=?([^&]*)/g;n=i.exec(t);){var a=vt(n[1]),u=vt(n[2]);a.substring(a.length-2)==="[]"?(r[a=a.substring(0,a.length-2)]||(r[a]=[])).push(u):r[a]=u===""||u}for(var l in r){var d=l.split("[");d.length>1&&(Nn(r,d.map(function(f){return f.replace(/[?[\]\\ ]/g,"")}),r[l]),delete r[l])}return r}(function(t){if(t){var n=t.match(/\?(.*)/);return n&&n[1]?n[1].split("#")[0]:""}return F&&window.location.search.substring(1)}(e))}function Nn(e,t,n){for(var r=t.length-1,i=0;i<r;++i){var a=t[i];if(a==="__proto__"||a==="constructor")break;a in e||(e[a]={}),e=e[a]}e[t[r]]=n}function We(){for(var e="",t=0,n=4294967295*Math.random()|0;t++<36;){var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"[t-1],i=15&n;e+=r=="-"||r=="4"?r:(r=="x"?i:3&i|8).toString(16),n=t%8==0?4294967295*Math.random()|0:n>>4}return e}var Oe="global",ve=ae+"global"+ae,ye=typeof self===mt&&self.self===self&&self||typeof global===mt&&global.global===global&&global||void 0;function oe(e){return ye[ve][e]}function ue(e,t){return ye[ve][e]=t}function be(e){delete ye[ve][e]}function we(e,t,n){var r;try{if(nt(e)){var i=window[e];r=i[t].bind(i)}}catch{}return r||n}ye[ve]||(ye[ve]={});var Ae={};function nt(e){if(typeof Ae[e]!==je)return Ae[e];try{var t=window[e];t.setItem(je,je),t.removeItem(je)}catch{return Ae[e]=!1}return Ae[e]=!0}function h(){return h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}var ee="function",Z="undefined",kn="@@redux/"+Math.random().toString(36),yt=function(){return typeof Symbol===ee&&Symbol.observable||"@@observable"}(),Le=" != "+ee;function Wt(e,t,n){var r;if(typeof t===ee&&typeof n===Z&&(n=t,t=void 0),typeof n!==Z){if(typeof n!==ee)throw new Error("enhancer"+Le);return n(Wt)(e,t)}if(typeof e!==ee)throw new Error("reducer"+Le);var i=e,a=t,u=[],l=u,d=!1;function f(){l===u&&(l=u.slice())}function m(){return a}function g(v){if(typeof v!==ee)throw new Error("Listener"+Le);var E=!0;return f(),l.push(v),function(){if(E){E=!1,f();var w=l.indexOf(v);l.splice(w,1)}}}function P(v){if(!W(v))throw new Error("Act != obj");if(typeof v.type===Z)throw new Error("ActType "+Z);if(d)throw new Error("Dispatch in reducer");try{d=!0,a=i(a,v)}finally{d=!1}for(var E=u=l,w=0;w<E.length;w++)(0,E[w])();return v}return P({type:"@@redux/INIT"}),(r={dispatch:P,subscribe:g,getState:m,replaceReducer:function(v){if(typeof v!==ee)throw new Error("next reducer"+Le);i=v,P({type:"@@redux/INIT"})}})[yt]=function(){var v,E=g;return(v={subscribe:function(w){if(typeof w!="object")throw new TypeError("Observer != obj");function b(){w.next&&w.next(m())}return b(),{unsubscribe:E(b)}}})[yt]=function(){return this},v},r}function jn(e,t){var n=t&&t.type;return"action "+(n&&n.toString()||"?")+"reducer "+e+" returns "+Z}function he(){var e=[].slice.call(arguments);return e.length===0?function(t){return t}:e.length===1?e[0]:e.reduce(function(t,n){return function(){return t(n.apply(void 0,[].slice.call(arguments)))}})}function An(){var e=arguments;return function(t){return function(n,r,i){var a,u=t(n,r,i),l=u.dispatch,d={getState:u.getState,dispatch:function(f){return l(f)}};return a=[].slice.call(e).map(function(f){return f(d)}),h({},u,{dispatch:l=he.apply(void 0,a)(u.dispatch)})}}}var te=ae+"anon_id",ie=ae+"user_id",pe=ae+"user_traits",K="userId",fe="anonymousId",Ce=["bootstrap","params","campaign","initializeStart","initialize","initializeEnd","ready","resetStart","reset","resetEnd","pageStart","page","pageEnd","pageAborted","trackStart","track","trackEnd","trackAborted","identifyStart","identify","identifyEnd","identifyAborted","userIdChanged","registerPlugins","enablePlugin","disablePlugin","online","offline","setItemStart","setItem","setItemEnd","setItemAborted","removeItemStart","removeItem","removeItemEnd","removeItemAborted"],et=["name","EVENTS","config","loaded"],y=Ce.reduce(function(e,t){return e[t]=t,e},{registerPluginType:function(e){return"registerPlugin:"+e},pluginReadyType:function(e){return"ready:"+e}}),ht=/^utm_/,bt=/^an_prop_/,wt=/^an_trait_/;function Ln(e){var t=e.storage.setItem;return function(n){return function(r){return function(i){if(i.type===y.bootstrap){var a=i.params,u=i.user,l=i.persistedUser,d=i.initialUser,f=l.userId===u.userId;l.anonymousId!==u.anonymousId&&t(te,u.anonymousId),f||t(ie,u.userId),d.traits&&t(pe,h({},f&&l.traits?l.traits:{},d.traits));var m=Object.keys(i.params);if(m.length){var g=a.an_uid,P=a.an_event,v=m.reduce(function(E,w){if(w.match(ht)||w.match(/^(d|g)clid/)){var b=w.replace(ht,"");E.campaign[b==="campaign"?"name":b]=a[w]}return w.match(bt)&&(E.props[w.replace(bt,"")]=a[w]),w.match(wt)&&(E.traits[w.replace(wt,"")]=a[w]),E},{campaign:{},props:{},traits:{}});n.dispatch(h({type:y.params,raw:a},v,g?{userId:g}:{})),g&&setTimeout(function(){return e.identify(g,v.traits)},0),P&&setTimeout(function(){return e.track(P,v.props)},0),Object.keys(v.campaign).length&&n.dispatch({type:y.campaign,campaign:v.campaign})}}return r(i)}}}}function Tn(e){return function(t,n){if(t===void 0&&(t={}),n===void 0&&(n={}),n.type===y.setItemEnd){if(n.key===te)return h({},t,{anonymousId:n.value});if(n.key===ie)return h({},t,{userId:n.value})}switch(n.type){case y.identify:return Object.assign({},t,{userId:n.userId,traits:h({},t.traits,n.traits)});case y.reset:return[ie,te,pe].forEach(function(r){e.removeItem(r)}),Object.assign({},t,{userId:null,anonymousId:null,traits:{}});default:return t}}}function It(e){return{userId:e.getItem(ie),anonymousId:e.getItem(te),traits:e.getItem(pe)}}var tt=function(e){return ae+"TEMP"+ae+e};function $n(e){var t=e.storage,n=t.setItem,r=t.removeItem,i=t.getItem;return function(a){return function(u){return function(l){var d=l.userId,f=l.traits,m=l.options;if(l.type===y.reset&&([ie,pe,te].forEach(function(v){r(v)}),[K,fe,"traits"].forEach(function(v){be(tt(v))})),l.type===y.identify){i(te)||n(te,We());var g=i(ie),P=i(pe)||{};g&&g!==d&&a.dispatch({type:y.userIdChanged,old:{userId:g,traits:P},new:{userId:d,traits:f},options:m}),d&&n(ie,d),f&&n(pe,h({},P,f))}return u(l)}}}}var Ee={};function St(e,t){Ee[e]&&Y(Ee[e])&&(Ee[e](t),delete Ee[e])}function Xt(e,t,n){return new Promise(function(r,i){return t()?r(e):n<1?i(h({},e,{queue:!0})):new Promise(function(a){return setTimeout(a,10)}).then(function(a){return Xt(e,t,n-10).then(r,i)})})}function Ft(e,t,n){var r=t(),i=e.getState(),a=i.plugins,u=i.queue,l=i.user;if(!i.context.offline&&u&&u.actions&&u.actions.length){var d=u.actions.reduce(function(m,g,P){return a[g.plugin].loaded?(m.process.push(g),m.processIndex.push(P)):(m.requeue.push(g),m.requeueIndex.push(P)),m},{processIndex:[],process:[],requeue:[],requeueIndex:[]});if(d.processIndex&&d.processIndex.length){d.processIndex.forEach(function(m){var g=u.actions[m],P=g.plugin,v=g.payload.type,E=r[P][v];if(E&&Y(E)){var w=function(I,_){return I===void 0&&(I={}),_===void 0&&(_={}),[K,fe].reduce(function(k,s){return I.hasOwnProperty(s)&&_[s]&&_[s]!==I[s]&&(k[s]=_[s]),k},I)}(g.payload,l);E({payload:w,config:a[P].config,instance:n});var b=v+":"+P;e.dispatch(h({},w,{type:b,_:{called:b,from:"queueDrain"}}))}});var f=u.actions.filter(function(m,g){return!~d.processIndex.indexOf(g)});u.actions=f}}}var Qe=function(e){var t=e.data,n=e.action,r=e.instance,i=e.state,a=e.allPlugins,u=e.allMatches,l=e.store,d=e.EVENTS;try{var f=i.plugins,m=i.context,g=n.type,P=g.match(ge),v=t.exact.map(function(b){return b.pluginName});P&&(v=u.during.map(function(b){return b.pluginName}));var E=function(b,I){return function(_,k,s){var S=k.config,L=k.name,U=L+"."+_.type;s&&(U=s.event);var j=_.type.match(ge)?function(T,D,V,C,J){return function(x,z){var X=C?C.name:T,B=z&&Ne(z)?z:V;if(C&&(!(B=z&&Ne(z)?z:[T]).includes(T)||B.length!==1))throw new Error("Method "+D+" can only abort "+T+" plugin. "+JSON.stringify(B)+" input valid");return h({},J,{abort:{reason:x,plugins:B,caller:D,_:X}})}}(L,U,I,s,_):function(T,D){return function(){throw new Error(T.type+" action not cancellable. Remove abort in "+D)}}(_,U);return{payload:Mn(_),instance:b,config:S||{},abort:j}}}(r,v),w=t.exact.reduce(function(b,I){var _=I.pluginName,k=I.methodName,s=!1;return k.match(/^initialize/)||k.match(/^reset/)||(s=!f[_].loaded),m.offline&&k.match(/^(page|track|identify)/)&&(s=!0),b[""+_]=s,b},{});return Promise.resolve(t.exact.reduce(function(b,I,_){var k=I.pluginName;return Promise.resolve(b).then(function(s){function S(){return Promise.resolve(s)}var L=function(){if(t.namespaced&&t.namespaced[k])return Promise.resolve(t.namespaced[k].reduce(function(U,j,T){return Promise.resolve(U).then(function(D){return j.method&&Y(j.method)?(function(x,z){var X=kt(x);if(X&&X.name===z){var B=kt(X.method);throw new Error([z+" plugin is calling method "+x,"Plugins cant call self","Use "+X.method+" "+(B?"or "+B.method:"")+" in "+z+" plugin insteadof "+x].join(`
`))}}(j.methodName,j.pluginName),Promise.resolve(j.method({payload:D,instance:r,abort:(V=D,C=k,J=j.pluginName,function(x,z){return h({},V,{abort:{reason:x,plugins:z||[C],caller:g,from:J||C}})}),config:Pt(j.pluginName,f,a),plugins:f})).then(function(x){var z=W(x)?x:{};return Promise.resolve(h({},D,z))})):D;var V,C,J})},Promise.resolve(n))).then(function(U){s[k]=U});s[k]=n}();return L&&L.then?L.then(S):S()})},Promise.resolve({}))).then(function(b){return Promise.resolve(t.exact.reduce(function(I,_,k){try{var s=t.exact.length===k+1,S=_.pluginName,L=a[S];return Promise.resolve(I).then(function(U){var j=b[S]?b[S]:{};if(P&&(j=U),Ye(j,S))return Ge({data:j,method:g,instance:r,pluginName:S,store:l}),Promise.resolve(U);if(Ye(U,S))return s&&Ge({data:U,method:g,instance:r,store:l}),Promise.resolve(U);if(w.hasOwnProperty(S)&&w[S]===!0)return l.dispatch({type:"queue",plugin:S,payload:j,_:{called:"queue",from:"queueMechanism"}}),Promise.resolve(U);var T=E(b[S],a[S]);return Promise.resolve(L[g]({abort:T.abort,payload:j,instance:r,config:Pt(S,f,a),plugins:f})).then(function(D){var V=W(D)?D:{},C=h({},U,V),J=b[S];if(Ye(J,S))Ge({data:J,method:g,instance:r,pluginName:S,store:l});else{var x=g+":"+S;(x.match(/:/g)||[]).length<2&&!g.match(Et)&&!g.match(Ot)&&r.dispatch(h({},P?C:j,{type:x,_:{called:x,from:"submethod"}}))}return Promise.resolve(C)})})}catch(U){return Promise.reject(U)}},Promise.resolve(n))).then(function(I){if(!(g.match(ge)||g.match(/^registerPlugin/)||g.match(Ot)||g.match(Et)||g.match(/^params/)||g.match(/^userIdChanged/))){if(d.plugins.includes(g),I._&&I._.originalAction===g)return I;var _=h({},I,{_:{originalAction:I.type,called:I.type,from:"engineEnd"}});Ht(I,t.exact.length)&&!g.match(/End$/)&&(_=h({},_,{type:I.type+"Aborted"})),l.dispatch(_)}return I})})}catch(b){return Promise.reject(b)}},ge=/Start$/,Et=/^bootstrap/,Ot=/^ready/;function Ge(e){var t=e.pluginName,n=e.method+"Aborted"+(t?":"+t:"");e.store.dispatch(h({},e.data,{type:n,_:{called:n,from:"abort"}}))}function Pt(e,t,n){var r=t[e]||n[e];return r&&r.config?r.config:{}}function _t(e,t){return t.reduce(function(n,r){return r[e]?n.concat({methodName:e,pluginName:r.name,method:r[e]}):n},[])}function xt(e,t){var n=e.replace(ge,""),r=t?":"+t:"";return[""+e+r,""+n+r,n+"End"+r]}function Ye(e,t){var n=e.abort;return!!n&&(n===!0||Nt(n,t)||n&&Nt(n.plugins,t))}function Ht(e,t){var n=e.abort;if(!n)return!1;if(n===!0||de(n))return!0;var r=n.plugins;return Ne(n)&&n.length===t||Ne(r)&&r.length===t}function Ne(e){return Array.isArray(e)}function Nt(e,t){return!(!e||!Ne(e))&&e.includes(t)}function kt(e){var t=e.match(/(.*):(.*)/);return!!t&&{method:t[1],name:t[2]}}function Mn(e){return Object.keys(e).reduce(function(t,n){return n==="type"||(t[n]=W(e[n])?Object.assign({},e[n]):e[n]),t},{})}function Un(e,t,n){var r={};return function(i){return function(a){return function(u){try{var l,d=function(s){return l?s:a(g)},f=u.type,m=u.plugins,g=u;if(u.abort)return Promise.resolve(a(u));if(f===y.enablePlugin&&i.dispatch({type:y.initializeStart,plugins:m,disabled:[],fromEnable:!0,meta:u.meta}),f===y.disablePlugin&&setTimeout(function(){return St(u.meta.rid,{payload:u})},0),f===y.initializeEnd){var P=t(),v=Object.keys(P),E=v.filter(function(s){return m.includes(s)}).map(function(s){return P[s]}),w=[],b=[],I=u.disabled,_=E.map(function(s){var S=s.name;return Xt(s,s.loaded,1e4).then(function(L){return r[S]||(i.dispatch({type:y.pluginReadyType(S),name:S,events:Object.keys(s).filter(function(U){return!et.includes(U)})}),r[S]=!0),w=w.concat(S),s}).catch(function(L){if(L instanceof Error)throw new Error(L);return b=b.concat(L.name),L})});Promise.all(_).then(function(s){var S={plugins:w,failed:b,disabled:I};setTimeout(function(){v.length===_.length+I.length&&i.dispatch(h({},{type:y.ready},S))},0)})}var k=function(){if(f!==y.bootstrap)return/^ready:([^:]*)$/.test(f)&&setTimeout(function(){return Ft(i,t,e)},0),Promise.resolve(function(s,S,L,U,j){try{var T=Y(S)?S():S,D=s.type,V=D.replace(ge,"");if(s._&&s._.called)return Promise.resolve(s);var C=L.getState(),J=(X=T,(B=C.plugins)===void 0&&(B={}),(c=s.options)===void 0&&(c={}),Object.keys(X).filter(function(o){var p=c.plugins||{};return hn(p[o])?p[o]:p.all!==!1&&(!B[o]||B[o].enabled!==!1)}).map(function(o){return X[o]}));D===y.initializeStart&&s.fromEnable&&(J=Object.keys(C.plugins).filter(function(o){var p=C.plugins[o];return s.plugins.includes(o)&&!p.initialized}).map(function(o){return T[o]}));var x=J.map(function(o){return o.name}),z=function(o,p,N){var A=xt(o).map(function(O){return _t(O,p)});return p.reduce(function(O,q){var $=q.name,R=xt(o,$).map(function(se){return _t(se,p)}),M=R[0],H=R[1],ce=R[2];return M.length&&(O.beforeNS[$]=M),H.length&&(O.duringNS[$]=H),ce.length&&(O.afterNS[$]=ce),O},{before:A[0],beforeNS:{},during:A[1],duringNS:{},after:A[2],afterNS:{}})}(D,J);return Promise.resolve(Qe({action:s,data:{exact:z.before,namespaced:z.beforeNS},state:C,allPlugins:T,allMatches:z,instance:L,store:U,EVENTS:j})).then(function(o){function p(){var O=function(){if(D.match(ge))return Promise.resolve(Qe({action:h({},N,{type:V+"End"}),data:{exact:z.after,namespaced:z.afterNS},state:C,allPlugins:T,allMatches:z,instance:L,store:U,EVENTS:j})).then(function(q){q.meta&&q.meta.hasCallback&&St(q.meta.rid,{payload:q})})}();return O&&O.then?O.then(function(){return o}):o}if(Ht(o,x.length))return o;var N,A=function(){if(D!==V)return Promise.resolve(Qe({action:h({},o,{type:V}),data:{exact:z.during,namespaced:z.duringNS},state:C,allPlugins:T,allMatches:z,instance:L,store:U,EVENTS:j})).then(function(O){N=O});N=o}();return A&&A.then?A.then(p):p()})}catch(o){return Promise.reject(o)}var X,B,c}(u,t,e,i,n)).then(function(s){var S=a(s);return l=1,S})}();return Promise.resolve(k&&k.then?k.then(d):d(k))}catch(s){return Promise.reject(s)}}}}}function zn(e){return function(t){return function(n){return function(r){var i=r.type,a=r.key,u=r.value,l=r.options;if(i===y.setItem||i===y.removeItem){if(r.abort)return n(r);i===y.setItem?e.setItem(a,u,l):e.removeItem(a,l)}return n(r)}}}}var Dn=function(){var e=this;this.before=[],this.after=[],this.addMiddleware=function(t,n){e[n]=e[n].concat(t)},this.removeMiddleware=function(t,n){var r=e[n].findIndex(function(i){return i===t});r!==-1&&(e[n]=[].concat(e[n].slice(0,r),e[n].slice(r+1)))},this.dynamicMiddlewares=function(t){return function(n){return function(r){return function(i){var a={getState:n.getState,dispatch:function(l){return n.dispatch(l)}},u=e[t].map(function(l){return l(a)});return he.apply(void 0,u)(r)(i)}}}}};function Cn(e){return function(t,n){t===void 0&&(t={});var r={};if(n.type==="initialize:aborted")return t;if(/^registerPlugin:([^:]*)$/.test(n.type)){var i=jt(n.type,"registerPlugin"),a=e()[i];if(!a||!i)return t;var u=n.enabled;return r[i]={enabled:u,initialized:!!u&&Boolean(!a.initialize),loaded:!!u&&Boolean(a.loaded()),config:a.config||{}},h({},t,r)}if(/^initialize:([^:]*)$/.test(n.type)){var l=jt(n.type,y.initialize),d=e()[l];return d&&l?(r[l]=h({},t[l],{initialized:!0,loaded:Boolean(d.loaded())}),h({},t,r)):t}if(/^ready:([^:]*)$/.test(n.type))return r[n.name]=h({},t[n.name],{loaded:!0}),h({},t,r);switch(n.type){case y.disablePlugin:return h({},t,At(n.plugins,!1,t));case y.enablePlugin:return h({},t,At(n.plugins,!0,t));default:return t}}}function jt(e,t){return e.substring(t.length+1,e.length)}function At(e,t,n){return e.reduce(function(r,i){return r[i]=h({},n[i],{enabled:t}),r},n)}function Qt(e){try{return JSON.parse(JSON.stringify(e))}catch{}return e}var Rn={last:{},history:[]};function qn(e,t){e===void 0&&(e=Rn);var n=t.options,r=t.meta;if(t.type===y.track){var i=Qt(h({event:t.event,properties:t.properties},Object.keys(n).length&&{options:n},{meta:r}));return h({},e,{last:i,history:e.history.concat(i)})}return e}var Vn={actions:[]};function Bn(e,t){e===void 0&&(e=Vn);var n=t.payload;switch(t.type){case"queue":var r;return r=n&&n.type&&n.type===y.identify?[t].concat(e.actions):e.actions.concat(t),h({},e,{actions:r});case"dequeue":return[];default:return e}}var Gt=/#.*$/;function Jn(e){var t=/(http[s]?:\/\/)?([^\/\s]+\/)(.*)/g.exec(e);return"/"+(t&&t[3]?t[3].split("?")[0].replace(Gt,""):"")}var Yt,Zt,Kt,en,Wn=function(e){if(e===void 0&&(e={}),!F)return e;var t=document,n=t.title,r=t.referrer,i=window,a=i.location,u=i.innerWidth,l=i.innerHeight,d=a.hash,f=a.search,m=function(P){var v=function(){if(F){for(var E,w=document.getElementsByTagName("link"),b=0;E=w[b];b++)if(E.getAttribute("rel")==="canonical")return E.getAttribute("href")}}();return v?v.match(/\?/)?v:v+P:window.location.href.replace(Gt,"")}(f),g={title:n,url:m,path:Jn(m),hash:d,search:f,width:u,height:l};return r&&r!==""&&(g.referrer=r),h({},g,e)},Xn={last:{},history:[]};function Fn(e,t){e===void 0&&(e=Xn);var n=t.options;if(t.type===y.page){var r=Qt(h({properties:t.properties,meta:t.meta},Object.keys(n).length&&{options:n}));return h({},e,{last:r,history:e.history.concat(r)})}return e}Yt=function(){if(!F)return!1;var e=navigator.appVersion;return~e.indexOf("Win")?"Windows":~e.indexOf("Mac")?"MacOS":~e.indexOf("X11")?"UNIX":~e.indexOf("Linux")?"Linux":"Unknown OS"}(),Zt=F?document.referrer:null,Kt=Pn(),en=_n();var Lt={initialized:!1,sessionId:We(),app:null,version:null,debug:!1,offline:!!F&&!navigator.onLine,os:{name:Yt},userAgent:F?navigator.userAgent:"node",library:{name:"analytics",version:"0.11.0"},timezone:en,locale:Kt,campaign:{},referrer:Zt};function Hn(e,t){e===void 0&&(e=Lt);var n=e.initialized,r=t.campaign;switch(t.type){case y.campaign:return h({},e,{campaign:r});case y.offline:return h({},e,{offline:!0});case y.online:return h({},e,{offline:!1});default:return n?e:h({},Lt,e,{initialized:!0})}}var Qn=["plugins","reducers","storage"];function Gn(e,t,n){if(F){var r=window[(n?"add":"remove")+"EventListener"];e.split(" ").forEach(function(i){r(i,t)})}}function Yn(e){var t=Gn.bind(null,"online offline",function(n){return Promise.resolve(!navigator.onLine).then(e)});return t(!0),function(n){return t(!1)}}function tn(){return ue("analytics",[]),function(e){return function(t,n,r){var i=e(t,n,r),a=i.dispatch;return Object.assign(i,{dispatch:function(u){return ye[ve].analytics.push(u.action||u),a(u)}})}}}function Tt(e){return function(){return he(he.apply(null,arguments),tn())}}function Ze(e){return e?wn(e)?e:[e]:[]}function $t(e,t,n){e===void 0&&(e={});var r,i,a=We();return t&&(Ee[a]=(r=t,i=function(u){for(var l,d=u||Array.prototype.slice.call(arguments),f=0;f<d.length;f++)if(Y(d[f])){l=d[f];break}return l}(n),function(u){i&&i(u),r(u)})),h({},e,{rid:a,ts:new Date().getTime()},t?{hasCallback:!0}:{})}function Zn(e){e===void 0&&(e={});var t=e.reducers||{},n=e.initialUser||{},r=(e.plugins||[]).reduce(function(c,o){if(Y(o))return c.middlewares=c.middlewares.concat(o),c;if(o.NAMESPACE&&(o.name=o.NAMESPACE),!o.name)throw new Error("https://lytics.dev/errors/1");var p=o.EVENTS?Object.keys(o.EVENTS).map(function(O){return o.EVENTS[O]}):[];c.pluginEnabled[o.name]=!(o.enabled===!1||o.config&&o.config.enabled===!1),delete o.enabled,o.methods&&(c.methods[o.name]=Object.keys(o.methods).reduce(function(O,q){var $;return O[q]=($=o.methods[q],function(){for(var R=Array.prototype.slice.call(arguments),M=new Array($.length),H=0;H<R.length;H++)M[H]=R[H];return M[M.length]=s,$.apply({instance:s},M)}),O},{}),delete o.methods);var N=Object.keys(o).concat(p),A=new Set(c.events.concat(N));if(c.events=Array.from(A),c.pluginsArray=c.pluginsArray.concat(o),c.plugins[o.name])throw new Error(o.name+"AlreadyLoaded");return c.plugins[o.name]=o,c.plugins[o.name].loaded||(c.plugins[o.name].loaded=function(){return!0}),c},{plugins:{},pluginEnabled:{},methods:{},pluginsArray:[],middlewares:[],events:[]}),i=e.storage?e.storage:{getItem:oe,setItem:ue,removeItem:be},a=function(c){return function(o,p,N){return p.getState("user")[o]||(N&&W(N)&&N[o]?N[o]:It(c)[o]||oe(tt(o))||null)}}(i),u=r.plugins,l=r.events.filter(function(c){return!et.includes(c)}).sort(),d=new Set(l.concat(Ce).filter(function(c){return!et.includes(c)})),f=Array.from(d).sort(),m=function(){return u},g=new Dn,P=g.addMiddleware,v=g.removeMiddleware,E=g.dynamicMiddlewares,w=function(){throw new Error("Abort disabled inListener")},b=xn(),I=It(i),_=h({},I,n,b.an_uid?{userId:b.an_uid}:{},b.an_aid?{anonymousId:b.an_aid}:{});_.anonymousId||(_.anonymousId=We());var k=h({enable:function(c,o){return new Promise(function(p){x.dispatch({type:y.enablePlugin,plugins:Ze(c),_:{originalAction:y.enablePlugin}},p,[o])})},disable:function(c,o){return new Promise(function(p){x.dispatch({type:y.disablePlugin,plugins:Ze(c),_:{originalAction:y.disablePlugin}},p,[o])})}},r.methods),s={identify:function(c,o,p,N){try{var A=de(c)?c:null,O=W(c)?c:o,q=p||{},$=s.user();ue(tt(K),A);var R=A||O.userId||a(K,s,O);return Promise.resolve(new Promise(function(M){x.dispatch(h({type:y.identifyStart,userId:R,traits:O||{},options:q,anonymousId:$.anonymousId},$.id&&$.id!==A&&{previousId:$.id}),M,[o,p,N])}))}catch(M){return Promise.reject(M)}},track:function(c,o,p,N){try{var A=W(c)?c.event:c;if(!A||!de(A))throw new Error("EventMissing");var O=W(c)?c:o||{},q=W(p)?p:{};return Promise.resolve(new Promise(function($){x.dispatch({type:y.trackStart,event:A,properties:O,options:q,userId:a(K,s,o),anonymousId:a(fe,s,o)},$,[o,p,N])}))}catch($){return Promise.reject($)}},page:function(c,o,p){try{var N=W(c)?c:{},A=W(o)?o:{};return Promise.resolve(new Promise(function(O){x.dispatch({type:y.pageStart,properties:Wn(N),options:A,userId:a(K,s,N),anonymousId:a(fe,s,N)},O,[c,o,p])}))}catch(O){return Promise.reject(O)}},user:function(c){if(c===K||c==="id")return a(K,s);if(c===fe||c==="anonId")return a(fe,s);var o=s.getState("user");return c?gt(o,c):o},reset:function(c){return new Promise(function(o){x.dispatch({type:y.resetStart},o,c)})},ready:function(c){return s.on(y.ready,c)},on:function(c,o){if(!c||!Y(o))return!1;if(c===y.bootstrap)throw new Error(".on disabled for "+c);var p=/Start$|Start:/;if(c==="*"){var N=function($){return function(R){return function(M){return M.type.match(p)&&o({payload:M,instance:s,plugins:u}),R(M)}}},A=function($){return function(R){return function(M){return M.type.match(p)||o({payload:M,instance:s,plugins:u}),R(M)}}};return P(N,Te),P(A,$e),function(){v(N,Te),v(A,$e)}}var O=c.match(p)?Te:$e,q=function($){return function(R){return function(M){return M.type===c&&o({payload:M,instance:s,plugins:u,abort:w}),R(M)}}};return P(q,O),function(){return v(q,O)}},once:function(c,o){if(!c||!Y(o))return!1;if(c===y.bootstrap)throw new Error(".once disabled for "+c);var p=s.on(c,function(N){o({payload:N.payload,instance:s,plugins:u,abort:w}),p()});return p},getState:function(c){var o=x.getState();return c?gt(o,c):Object.assign({},o)},dispatch:function(c){var o=de(c)?{type:c}:c;if(Ce.includes(o.type))throw new Error("reserved action "+o.type);var p=h({},o,{_:h({originalAction:o.type},c._||{})});x.dispatch(p)},enablePlugin:k.enable,disablePlugin:k.disable,plugins:k,storage:{getItem:i.getItem,setItem:function(c,o,p){x.dispatch({type:y.setItemStart,key:c,value:o,options:p})},removeItem:function(c,o){x.dispatch({type:y.removeItemStart,key:c,options:o})}},setAnonymousId:function(c,o){s.storage.setItem(te,c,o)},events:{core:Ce,plugins:l}},S=r.middlewares.concat([function(c){return function(o){return function(p){return p.meta||(p.meta=$t()),o(p)}}},E(Te),Un(s,m,{all:f,plugins:l}),zn(i),Ln(s),$n(s),E($e)]),L={context:Hn,user:Tn(i),page:Fn,track:qn,plugins:Cn(m),queue:Bn},U=he,j=he;if(F&&e.debug){var T=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;T&&(U=T({trace:!0,traceLimit:25})),j=function(){return arguments.length===0?tn():W(typeof arguments[0])?Tt():Tt().apply(null,arguments)}}var D,V=function(c){return Object.keys(c).reduce(function(o,p){return Qn.includes(p)||(o[p]=c[p]),o},{})}(e),C=r.pluginsArray.reduce(function(c,o){var p=o.name,N=o.config,A=o.loaded,O=r.pluginEnabled[p];return c[p]={enabled:O,initialized:!!O&&Boolean(!o.initialize),loaded:Boolean(A()),config:N||{}},c},{}),J={context:V,user:_,plugins:C},x=Wt(function(c){for(var o=Object.keys(c),p={},N=0;N<o.length;N++){var A=o[N];typeof c[A]===ee&&(p[A]=c[A])}var O,q=Object.keys(p);try{(function($){Object.keys($).forEach(function(R){var M=$[R];if(typeof M(void 0,{type:"@@redux/INIT"})===Z||typeof M(void 0,{type:kn})===Z)throw new Error("reducer "+R+" "+Z)})})(p)}catch($){O=$}return function($,R){if($===void 0&&($={}),O)throw O;for(var M=!1,H={},ce=0;ce<q.length;ce++){var se=q[ce],lt=$[se],He=(0,p[se])(lt,R);if(typeof He===Z){var sn=jn(se,R);throw new Error(sn)}H[se]=He,M=M||He!==lt}return M?H:$}}(h({},L,t)),J,j(U(An.apply(void 0,S))));x.dispatch=(D=x.dispatch,function(c,o,p){var N=h({},c,{meta:$t(c.meta,o,Ze(p))});return D.apply(null,[N])});var z=Object.keys(u);x.dispatch({type:y.bootstrap,plugins:z,config:V,params:b,user:_,initialUser:n,persistedUser:I});var X=z.filter(function(c){return r.pluginEnabled[c]}),B=z.filter(function(c){return!r.pluginEnabled[c]});return x.dispatch({type:y.registerPlugins,plugins:z,enabled:r.pluginEnabled}),r.pluginsArray.map(function(c,o){var p=c.bootstrap,N=c.config,A=c.name;p&&Y(p)&&p({instance:s,config:N,payload:c}),x.dispatch({type:y.registerPluginType(A),name:A,enabled:r.pluginEnabled[A],plugin:c}),r.pluginsArray.length===o+1&&x.dispatch({type:y.initializeStart,plugins:X,disabled:B})}),Yn(function(c){x.dispatch({type:c?y.offline:y.online})}),function(c,o,p){setInterval(function(){return Ft(c,o,p)},3e3)}(x,m,s),s}var Te="before",$e="after",Pe="cookie",re=an(),nn=Xe,Kn=Xe;function rn(e){return re?Xe(e,"",-1):be(e)}function an(){if(re!==void 0)return re;var e="cookiecookie";try{Xe(e,e),re=document.cookie.indexOf(e)!==-1,rn(e)}catch{re=!1}return re}function Xe(e,t,n,r,i,a){if(typeof window!="undefined"){var u=arguments.length>1;return re===!1&&(u?ue(e,t):oe(e)),u?document.cookie=e+"="+encodeURIComponent(t)+(n?"; expires="+new Date(+new Date+1e3*n).toUTCString()+(r?"; path="+r:"")+(i?"; domain="+i:"")+(a?"; secure":""):""):decodeURIComponent((("; "+document.cookie).split("; "+e+"=")[1]||"").split(";")[0])}}var _e="localStorage",er=nt.bind(null,"localStorage");we("localStorage","getItem",oe);we("localStorage","setItem",ue);we("localStorage","removeItem",be);var xe="sessionStorage",tr=nt.bind(null,"sessionStorage");we("sessionStorage","getItem",oe);we("sessionStorage","setItem",ue);we("sessionStorage","removeItem",be);function me(e){var t=e;try{if((t=JSON.parse(e))==="true")return!0;if(t==="false")return!1;if(W(t))return t;parseFloat(t)===t&&(t=parseFloat(t))}catch{}if(t!==null&&t!=="")return t}var nr=er(),rr=tr(),ir=an();function on(e,t){if(e){var n=rt(t),r=!ut(n),i=it(n)?me(localStorage.getItem(e)):void 0;if(r&&!le(i))return i;var a=at(n)?me(nn(e)):void 0;if(r&&a)return a;var u=ot(n)?me(sessionStorage.getItem(e)):void 0;if(r&&u)return u;var l=oe(e);return r?l:{localStorage:i,sessionStorage:u,cookie:a,global:l}}}function ar(e,t,n){if(e&&!le(t)){var r={},i=rt(n),a=JSON.stringify(t),u=!ut(i);return it(i)&&(r[_e]=Me(_e,t,me(localStorage.getItem(e))),localStorage.setItem(e,a),u)?r[_e]:at(i)&&(r[Pe]=Me(Pe,t,me(nn(e))),Kn(e,a),u)?r[Pe]:ot(i)&&(r[xe]=Me(xe,t,me(sessionStorage.getItem(e))),sessionStorage.setItem(e,a),u)?r[xe]:(r[Oe]=Me(Oe,t,oe(e)),ue(e,t),u?r[Oe]:r)}}function or(e,t){if(e){var n=rt(t),r=on(e,qt),i={};return!le(r.localStorage)&&it(n)&&(localStorage.removeItem(e),i[_e]=r.localStorage),!le(r.cookie)&&at(n)&&(rn(e),i[Pe]=r.cookie),!le(r.sessionStorage)&&ot(n)&&(sessionStorage.removeItem(e),i[xe]=r.sessionStorage),!le(r.global)&&Fe(n,Oe)&&(be(e),i[Oe]=r.global),i}}function rt(e){return e?de(e)?e:e.storage:Rt}function it(e){return nr&&Fe(e,_e)}function at(e){return ir&&Fe(e,Pe)}function ot(e){return rr&&Fe(e,xe)}function ut(e){return e===qt||e==="all"}function Fe(e,t){return e===Rt||e===t||ut(e)}function Me(e,t,n){return{location:e,current:t,previous:n}}var ur={setItem:ar,getItem:on,removeItem:or};function cr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Mt(Object(n),!0).forEach(function(r){cr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={storage:ur};return Zn(Ut(Ut({},t),e))}function lr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ke(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){lr(e,i,n[i])})}return e}var fr={debug:!1,containerId:null,dataLayerName:"dataLayer",dataLayer:void 0,preview:void 0,auth:void 0,execution:"async"},Ue;function dr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{name:"google-tag-manager",config:Ke({},fr,e),initialize:function(n){var r=n.config,i=r.containerId,a=r.dataLayerName,u=r.customScriptSrc,l=r.preview,d=r.auth,f=r.execution;if(!i)throw new Error("No google tag manager containerId defined");if(l&&!d)throw new Error("When enabling preview mode, both preview and auth parameters must be defined");var m=u||"https://www.googletagmanager.com/gtm.js";Dt(i)||(function(g,P,v,E,w){g[E]=g[E]||[],g[E].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var b=P.getElementsByTagName(v)[0],I=P.createElement(v),_=E!="dataLayer"?"&l="+E:"",k=l?"&gtm_preview="+l+"&gtm_auth="+d+"&gtm_cookies_win=x":"";f&&(I[f]=!0),I.src="".concat(m,"?id=")+w+_+k,b.parentNode.insertBefore(I,b)}(window,document,"script",a,i),Ue=a,r.dataLayer=window[a])},page:function(n){var r=n.payload;n.options,n.instance;var i=n.config;typeof i.dataLayer!="undefined"&&i.dataLayer.push(r.properties)},track:function(n){var r=n.payload;n.options;var i=n.config;if(typeof i.dataLayer!="undefined"){var a=r.anonymousId,u=r.userId,l=r.properties,d=l;u&&(d.userId=u),a&&(d.anonymousId=a),l.category||(d.category="All"),i.debug&&console.log("gtag push",Ke({event:r.event},d)),i.dataLayer.push(Ke({event:r.event},d))}},loaded:function(){var n=!!Ue&&!!(window[Ue]&&Array.prototype.push!==window[Ue].push);return Dt(e.containerId)&&n}}}var zt={};function Dt(e){var t=zt[e];t||(t=new RegExp("googletagmanager\\.com\\/gtm\\.js.*[?&]id="+e),zt[e]=t);var n=document.querySelectorAll("script[src]");return!!Object.keys(n).filter(function(r){return(n[r].src||"").match(t)}).length}var pr=dr;function gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function mr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ct(n,!0).forEach(function(r){gr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(n).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{name:"mixpanel",config:e,initialize:function(n){var r=n.config,i=r.token,a=r.customScriptSrc,u=r.options,l=u===void 0?{}:u;if(!i)throw new Error("No mixpanel token defined");typeof window.mixpanel=="undefined"&&(function(d,f){if(!f.__SV){var m=window;try{var g,P,v,E=m.location,w=E.hash;g=function(k,s){return(P=k.match(RegExp(s+"=([^&]*)")))?P[1]:null},w&&g(w,"state")&&(v=JSON.parse(decodeURIComponent(g(w,"state"))),v.action==="mpeditor"&&(m.sessionStorage.setItem("_mpcehash",w),history.replaceState(v.desiredHash||"",d.title,E.pathname+E.search)))}catch{}var b,I;window.mixpanel=f,f._i=[],f.init=function(_,k,s){function S(j,T){var D=T.split(".");D.length==2&&(j=j[D[0]],T=D[1]),j[T]=function(){j.push([T].concat(Array.prototype.slice.call(arguments,0)))}}var L=f;for(typeof s!="undefined"?L=f[s]=[]:s="mixpanel",L.people=L.people||[],L.toString=function(j){var T="mixpanel";return s!=="mixpanel"&&(T+="."+s),j||(T+=" (stub)"),T},L.people.toString=function(){return L.toString(1)+".people (stub)"},b="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" "),I=0;I<b.length;I++)S(L,b[I]);var U="set set_once union unset remove delete".split(" ");L.get_group=function(){function j(C){T[C]=function(){call2_args=arguments,call2=[C].concat(Array.prototype.slice.call(call2_args,0)),L.push([D,call2])}}for(var T={},D=["get_group"].concat(Array.prototype.slice.call(arguments,0)),V=0;V<U.length;V++)j(U[V]);return T},f._i.push([_,k,s])},f.__SV=1.2,m=d.createElement("script"),m.type="text/javascript",m.async=!0,m.src=a||(typeof MIXPANEL_CUSTOM_LIB_URL!="undefined"?MIXPANEL_CUSTOM_LIB_URL:d.location.protocol==="file:"&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js"),g=d.getElementsByTagName("script")[0],g.parentNode.insertBefore(m,g)}}(document,window.mixpanel||[]),mixpanel.init(r.token,mr({batch_requests:!0},l)))},identify:function(n){var r=n.payload,i=r.userId,a=r.traits;typeof i=="string"&&mixpanel.identify(i),a&&mixpanel.people.set(a)},page:function(n){var r=n.payload;mixpanel.track(e.pageEvent||r.properties.path,r.properties)},track:function(n){var r=n.payload;mixpanel.track(r.event,r.properties)},loaded:function(){return!!window.mixpanel},reset:function(){mixpanel.reset()},methods:{alias:function(n,r){mixpanel.alias(n,r)}}}}var yr=vr;const Pr=sr({app:"audial",plugins:[pr({containerId:"GTM-TNTJT9T"}),yr({token:"69da06a4f6f6e3802f4ae5b4c3a716c2"})]}),hr=5,ze=6,De=10;let br=(e,t,n,r)=>(e.events=e.events||{},e.events[n+De]||(e.events[n+De]=r(i=>{e.events[n].reduceRight((a,u)=>(u(a),a),Se({shared:{}},i))})),e.events[n]=e.events[n]||[],e.events[n].push(t),()=>{let i=e.events[n],a=i.indexOf(t);i.splice(a,1),i.length||(delete e.events[n],e.events[n+De](),delete e.events[n+De])}),wr=1e3,un=(e,t)=>br(e,()=>{let r=t();r&&e.events[ze].push(r)},hr,r=>{let i=e.listen;e.listen=u=>(!e.lc&&!e.active&&(r(),e.active=!0),i(u));let a=e.off;return e.events[ze]=[],e.off=()=>{setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let u of e.events[ze])u();e.events[ze]=[],a()}},wr)},()=>{e.listen=i,e.off=a}}),ne=[],Ie=e=>{let t,n=[],r={lc:0,value:e,set(i){r.value=i,r.notify()},get(){return r.lc||r.listen(()=>{})(),r.value},notify(i){t=n;let a=!ne.length;for(let u=0;u<t.length;u++)ne.push(t[u],r.value,i);if(a){for(let u=0;u<ne.length;u+=3)ne[u](ne[u+1],ne[u+2]);ne.length=0}},listen(i){return n===t&&(n=n.slice()),r.lc=n.push(i),()=>{n===t&&(n=n.slice());let a=n.indexOf(i);~a&&(n.splice(a,1),r.lc--,r.lc||r.off())}},subscribe(i){let a=r.listen(i);return i(r.value),a},off(){}};return r},cn=(e={})=>{let t=Ie(e);return t.setKey=function(n,r){typeof r=="undefined"?n in t.value&&(t.value=Se({},t.value),delete t.value[n],t.notify(n)):t.value[n]!==r&&(t.value=pt(Se({},t.value),{[n]:r}),t.notify(n))},t},Ve=e=>e,G={},Q={addEventListener(){},removeEventListener(){}};typeof localStorage!="undefined"&&(G=localStorage);let Ir={addEventListener(e,t){window.addEventListener("storage",t)},removeEventListener(e,t){window.removeEventListener("storage",t)}};typeof window!="undefined"&&(Q=Ir);function Sr(e,t=void 0,n={}){let r=n.encode||Ve,i=n.decode||Ve,a=Ie(t),u=a.set;a.set=d=>{typeof d=="undefined"?delete G[e]:G[e]=r(d),u(d)};function l(d){d.key===e?d.newValue===null?u(void 0):u(i(d.newValue)):G[e]||u(void 0)}return un(a,()=>{if(u(G[e]?i(G[e]):t),n.listen!==!1)return Q.addEventListener(e,l),()=>{Q.removeEventListener(e,l)}}),a}function ct(e,t={},n={}){let r=n.encode||Ve,i=n.decode||Ve,a=cn(),u=a.setKey;a.setKey=(f,m)=>{typeof m=="undefined"?(n.listen!==!1&&Q.perKey&&Q.removeEventListener(e+f,d),delete G[e+f]):(n.listen!==!1&&Q.perKey&&!(f in a.value)&&Q.addEventListener(e+f,d),G[e+f]=r(m)),u(f,m)};let l=a.set;a.set=function(f){for(let m in f)a.setKey(m,f[m]);for(let m in a.value)m in f||a.setKey(m)};function d(f){f.key?f.key.startsWith(e)&&(f.newValue===null?u(f.key.slice(e.length),void 0):u(f.key.slice(e.length),i(f.newValue))):l({})}return un(a,()=>{let f=Se({},t);for(let m in G)m.startsWith(e)&&(f[m.slice(e.length)]=i(G[m]));if(a.set(f),n.listen!==!1)return Q.addEventListener(e,d),()=>{Q.removeEventListener(e,d);for(let m in a.value)Q.removeEventListener(e+m,d)}}),a}const st={encode(e){return JSON.stringify(e)},decode(e){try{return JSON.parse(e)}catch(t){console.log(t,e)}}},Er={encode(e){return e?"1":"0"},decode(e){return e==="1"}},_r=ct("current_attempt",{attempts:0,guesses:[],correct:!1,date:new Date},st),xr=ct("past_attempts",{array:[]},st),Nr=Sr("read_instructions",!0,Er),kr=ct("current_song",{},st),jr=Ie(!0),Ar=cn({attempts:0,guesses:[],correct:!1,date:new Date}),Lr=Ie(!1),Tr=Ie(!0),$r=Ie([]);export{kr as a,$r as b,_r as c,Pr as e,Lr as i,Tr as l,xr as p,Nr as r,jr as s,Ar as t};
