import{S as J,i as K,s as Y,l as E,F as z,m as I,n as f,G as C,h as u,p as e,q as R,b as N,H as i,E as F,a as j,c as B,w as ue,x as ce,y as de,I as x,f as fe,t as he,B as me,J as pe,K as ve,o as be,r as le,u as ne,v as ie}from"./index-82e3b787.js";import{t as ee,b as te,c as re,s as $,e as ge}from"./store-d9f64d41.js";import{p as se}from"./stores-e58a8db8.js";function _e(l){let t,r,a;return{c(){t=E("div"),r=z("svg"),a=z("circle"),this.h()},l(s){t=I(s,"DIV",{class:!0});var o=f(t);r=C(o,"svg",{class:!0,height:!0,preserveAspectRatio:!0,style:!0,viewBox:!0,width:!0,xmlns:!0});var c=f(r);a=C(c,"circle",{cx:!0,cy:!0,fill:!0,r:!0,stroke:!0,"stroke-dasharray":!0,"stroke-width":!0}),f(a).forEach(u),c.forEach(u),o.forEach(u),this.h()},h(){e(a,"cx","50"),e(a,"cy","50"),e(a,"fill","none"),e(a,"r","38"),e(a,"stroke","currentColor"),e(a,"stroke-dasharray","179.0707812546182 61.690260418206066"),e(a,"stroke-width","7"),e(r,"class","animate-spin"),e(r,"height","100px"),e(r,"preserveAspectRatio","xMidYMid"),R(r,"margin","auto"),R(r,"background","transparent"),R(r,"display","block"),R(r,"shape-rendering","auto"),e(r,"viewBox","0 0 100 100"),e(r,"width","100px"),e(r,"xmlns","http://www.w3.org/2000/svg"),e(t,"class","w-full mx-auto text-center mt-20 text-blue-600")},m(s,o){N(s,t,o),i(t,r),i(r,a)},p:F,i:F,o:F,d(s){s&&u(t)}}}class Te extends J{constructor(t){super(),K(this,t,null,_e,Y,{})}}function we(l){let t,r,a,s,o,c,g,p,w,_,v,k,S,V,n,m,M,T;return{c(){t=E("div"),r=E("div"),s=j(),o=E("div"),g=j(),p=E("div"),_=j(),v=E("div"),S=j(),V=E("div"),m=j(),M=E("div"),this.h()},l(h){t=I(h,"DIV",{class:!0});var d=f(t);r=I(d,"DIV",{class:!0}),f(r).forEach(u),s=B(d),o=I(d,"DIV",{class:!0}),f(o).forEach(u),g=B(d),p=I(d,"DIV",{class:!0}),f(p).forEach(u),_=B(d),v=I(d,"DIV",{class:!0}),f(v).forEach(u),S=B(d),V=I(d,"DIV",{class:!0}),f(V).forEach(u),m=B(d),M=I(d,"DIV",{class:!0}),f(M).forEach(u),d.forEach(u),this.h()},h(){e(r,"class",a=`w-2/12 ${l[1](0,l[0].attempts)} border-r border-l`),e(o,"class",c=`w-2/12 ${l[1](1,l[0].attempts)} border-r border-l`),e(p,"class",w=`w-4/12 ${l[1](2,l[0].attempts)} border-r border-l`),e(v,"class",k=`w-4/12 ${l[1](3,l[0].attempts)} border-r border-l`),e(V,"class",n=`w-6/12 ${l[1](4,l[0].attempts)} border-r border-l`),e(M,"class",T=`w-6/12 ${l[1](5,l[0].attempts)} border-r border-l`),e(t,"class","max-w-3xl mx-auto flex h-3")},m(h,d){N(h,t,d),i(t,r),i(t,s),i(t,o),i(t,g),i(t,p),i(t,_),i(t,v),i(t,S),i(t,V),i(t,m),i(t,M)},p(h,[d]){d&1&&a!==(a=`w-2/12 ${h[1](0,h[0].attempts)} border-r border-l`)&&e(r,"class",a),d&1&&c!==(c=`w-2/12 ${h[1](1,h[0].attempts)} border-r border-l`)&&e(o,"class",c),d&1&&w!==(w=`w-4/12 ${h[1](2,h[0].attempts)} border-r border-l`)&&e(p,"class",w),d&1&&k!==(k=`w-4/12 ${h[1](3,h[0].attempts)} border-r border-l`)&&e(v,"class",k),d&1&&n!==(n=`w-6/12 ${h[1](4,h[0].attempts)} border-r border-l`)&&e(V,"class",n),d&1&&T!==(T=`w-6/12 ${h[1](5,h[0].attempts)} border-r border-l`)&&e(M,"class",T)},i:F,o:F,d(h){h&&u(t)}}}function ke(l,t,r){let{attempt:a}=t;const s=(o,c)=>{let g="bg-black opacity-40";return c===o&&!a.correct?g="bg-blue-500":c===o+1&&a.correct?g="bg-green-600":c>o&&a.guesses[o].artistCorrect?g="bg-amber-400":c>o&&!a.guesses[o].song?g="bg-gray-500":c>o&&(g="bg-red-600"),g};return l.$$set=o=>{"attempt"in o&&r(0,a=o.attempt)},[a,s]}class Ee extends J{constructor(t){super(),K(this,t,ke,we,Y,{attempt:0})}}function ae(l){let t,r;return{c(){t=E("div"),r=le(l[4]),this.h()},l(a){t=I(a,"DIV",{class:!0});var s=f(t);r=ne(s,l[4]),s.forEach(u),this.h()},h(){e(t,"class","flex flex-1 justify-start font-mono")},m(a,s){N(a,t,s),i(t,r)},p(a,s){s&16&&ie(r,a[4])},d(a){a&&u(t)}}}function oe(l){let t,r=Math.floor(l[3]/60)+":"+(Math.round(l[3]%60)<10?"0"+Math.round(l[3]%60):Math.round(l[3]%60)),a;return{c(){t=E("div"),a=le(r),this.h()},l(s){t=I(s,"DIV",{class:!0});var o=f(t);a=ne(o,r),o.forEach(u),this.h()},h(){e(t,"class","flex flex-1 justify-end font-mono")},m(s,o){N(s,t,o),i(t,a)},p(s,o){o&8&&r!==(r=Math.floor(s[3]/60)+":"+(Math.round(s[3]%60)<10?"0"+Math.round(s[3]%60):Math.round(s[3]%60)))&&ie(a,r)},d(s){s&&u(t)}}}function Ie(l){let t,r,a,s,o,c,g,p,w,_,v,k,S,V,n,m,M,T,h,d,H,q,Q;a=new Ee({props:{attempt:l[1]}});let y=l[0]&&ae(l),D=l[0]&&oe(l);return{c(){t=E("footer"),r=E("div"),ue(a.$$.fragment),s=j(),o=E("div"),c=E("div"),y&&y.c(),g=j(),p=E("div"),w=E("button"),_=z("svg"),v=z("path"),k=z("path"),V=j(),n=E("button"),m=z("svg"),M=z("path"),T=z("path"),d=j(),D&&D.c(),this.h()},l(b){t=I(b,"FOOTER",{class:!0});var A=f(t);r=I(A,"DIV",{class:!0});var O=f(r);ce(a.$$.fragment,O),O.forEach(u),s=B(A),o=I(A,"DIV",{class:!0});var W=f(o);c=I(W,"DIV",{class:!0});var L=f(c);y&&y.l(L),g=B(L),p=I(L,"DIV",{class:!0});var P=f(p);w=I(P,"BUTTON",{class:!0,title:!0});var X=f(w);_=C(X,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0,xmlns:!0});var G=f(_);v=C(G,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0}),f(v).forEach(u),k=C(G,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0}),f(k).forEach(u),G.forEach(u),X.forEach(u),V=B(P),n=I(P,"BUTTON",{class:!0,title:!0});var Z=f(n);m=C(Z,"svg",{class:!0,fill:!0,stroke:!0,"stroke-width":!0,viewBox:!0,xmlns:!0});var U=f(m);M=C(U,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),f(M).forEach(u),T=C(U,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),f(T).forEach(u),U.forEach(u),Z.forEach(u),P.forEach(u),d=B(L),D&&D.l(L),L.forEach(u),W.forEach(u),A.forEach(u),this.h()},h(){e(r,"class","border-b"),e(v,"d","M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"),e(v,"stroke-linecap","round"),e(v,"stroke-linejoin","round"),e(v,"stroke-width","2"),e(k,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),e(k,"stroke-linecap","round"),e(k,"stroke-linejoin","round"),e(k,"stroke-width","2"),e(_,"class","w-14 h-14 mx-auto"),e(_,"fill","none"),e(_,"stroke","currentColor"),e(_,"viewBox","0 0 24 24"),e(_,"xmlns","http://www.w3.org/2000/svg"),e(w,"class",S=`hover:text-blue-600 transition-colors duration-200 ${l[2]?"":"hidden"}`),e(w,"title","Play Song"),e(M,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),e(M,"stroke-linecap","round"),e(M,"stroke-linejoin","round"),e(T,"d","M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"),e(T,"stroke-linecap","round"),e(T,"stroke-linejoin","round"),e(m,"class","w-14 h-14 mx-auto"),e(m,"fill","none"),e(m,"stroke","currentColor"),e(m,"stroke-width","2"),e(m,"viewBox","0 0 24 24"),e(m,"xmlns","http://www.w3.org/2000/svg"),e(n,"class",h=`hover:text-blue-600 transition-colors duration-200 ${l[2]?"hidden":""}`),e(n,"title","Pause Song"),e(p,"class","text-center flex-1 justify-center"),e(c,"class","flex justify-evenly items-center w-full"),e(o,"class","max-w-screen-md mx-auto p-3"),e(t,"class","border-t border-white bottom-0 w-full fixed bg-gray-800")},m(b,A){N(b,t,A),i(t,r),de(a,r,null),i(t,s),i(t,o),i(o,c),y&&y.m(c,null),i(c,g),i(c,p),i(p,w),i(w,_),i(_,v),i(_,k),i(p,V),i(p,n),i(n,m),i(m,M),i(m,T),i(c,d),D&&D.m(c,null),H=!0,q||(Q=[x(w,"click",l[5]),x(n,"click",l[6])],q=!0)},p(b,[A]){const O={};A&2&&(O.attempt=b[1]),a.$set(O),b[0]?y?y.p(b,A):(y=ae(b),y.c(),y.m(c,g)):y&&(y.d(1),y=null),(!H||A&4&&S!==(S=`hover:text-blue-600 transition-colors duration-200 ${b[2]?"":"hidden"}`))&&e(w,"class",S),(!H||A&4&&h!==(h=`hover:text-blue-600 transition-colors duration-200 ${b[2]?"hidden":""}`))&&e(n,"class",h),b[0]?D?D.p(b,A):(D=oe(b),D.c(),D.m(c,null)):D&&(D.d(1),D=null)},i(b){H||(fe(a.$$.fragment,b),H=!0)},o(b){he(a.$$.fragment,b),H=!1},d(b){b&&u(t),me(a),y&&y.d(),D&&D.d(),q=!1,pe(Q)}}}function Me(l,t,r){let a;ve(l,se,n=>r(11,a=n));let s,o={attempts:0,guesses:[],correct:!1,date:new Date},c=!0,g=0,p="0:00",w,_,{custom:v=!1}=t,k="/";se.subscribe(n=>{n.url.pathname!==k&&s&&(clearTimeout(_),s.pause(),s.remove()),k=n.url.pathname}),be(()=>{k=a.url.pathname,v?(r(1,o=ee.get()),ee.listen(n=>r(1,o=n))):(r(1,o=te.get()),te.listen(n=>r(1,o=n))),r(0,s=new Audio(re.get().preview)),s.addEventListener("loadedmetadata",()=>r(3,g=s.duration)),navigator.mediaSession&&(navigator.mediaSession.setActionHandler("play",()=>null),navigator.mediaSession.setActionHandler("pause",()=>null),navigator.mediaSession.setActionHandler("seekbackward",null),navigator.mediaSession.setActionHandler("seekforward",()=>null))}),re.listen(n=>{s.remove(),r(0,s=new Audio(n.preview))}),$.listen(n=>r(2,c=n));const S=()=>{ge.track("play-song"),$.set(!1),s.play(),r(4,p="0:00");let n;const m=.08333333;switch(o.attempts){case 0:n=m;break;case 1:n=m*2;break;case 2:n=m*4;break;case 3:n=.5;break;case 4:n=.75;break;default:n=1;break}const M=o.correct?s.duration*1e3:s.duration/2*1e3*n;_=setTimeout(()=>{s.pause(),r(0,s.currentTime=0,s),$.set(!0),clearInterval(w)},M),w=setInterval(()=>{r(4,p=`${Math.floor(s.currentTime/60)}:${s.currentTime%60<10?"0"+Math.round(s.currentTime%60):Math.round(s.currentTime%60)}`)},1e3)},V=()=>{s.pause(),r(0,s.currentTime=0,s),$.set(!0)};return l.$$set=n=>{"custom"in n&&r(7,v=n.custom)},[s,o,c,g,p,S,V,v]}class Ae extends J{constructor(t){super(),K(this,t,Me,Ie,Y,{custom:7})}}export{Ae as F,Te as L};
